#version 330 core

layout (location = 0) in vec3 aPos;
layout (location = 1) in vec3 aNorm;
layout (location = 2) in vec2 aTexCoord;
layout (location = 3) in mat4 aModel;

layout (std140) uniform Matrices {
	mat4 projection_view;	// 16		// 16
							// 16		// 32
							// 16		// 48
							// 16		// 64
	vec3 sun_direction;		// 16		// 80
};

out VS_OUT {
	vec3 frag_pos;
	vec3 normal;
	vec2 tex_coord;
	vec3 light_dir;
} vs_out;

void main()
{
	gl_Position = projection_view * aModel * vec4(aPos, 1.0);
	
	vs_out.frag_pos = vec3(aModel * vec4(aPos, 1.0));
	vs_out.normal = mat3(transpose(inverse(aModel))) * aNorm;
	vs_out.tex_coord = aTexCoord;

	vs_out.light_dir = sun_direction;
}